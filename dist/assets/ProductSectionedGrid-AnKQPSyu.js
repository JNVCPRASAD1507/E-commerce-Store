import{h,j as e,n as f,r as d,i as g,B as o,T as x,I as c,k as b}from"./index-CX73dulP.js";import{C as j,a as y,b as v,G as m}from"./Grid-BWueH6sy.js";const C=h(e.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add"),w=h(e.jsx("path",{d:"M19 13H5v-2h14z"}),"Remove"),S=({data:s,addToCart:n})=>{const i=f(),[t,r]=d.useState(0);g("(max-width:600px)");const a="https://via.placeholder.com/150",l=()=>r(t+1),p=()=>t>0&&r(t-1),u=()=>{t>0&&(n({...s,quantity:t}),r(0))};return d.useEffect(()=>{localStorage.getItem("isAuthenticated")||i("/signin")},[i]),e.jsx(o,{sx:{width:{xs:"32%",sm:220,md:230,lg:240},minWidth:{xs:"100px",sm:0},maxWidth:{xs:"none",sm:220},aspectRatio:"3 / 4",mx:{xs:"1%",sm:1},mb:{xs:2,sm:0},display:"flex",alignItems:"stretch"},children:e.jsxs(j,{tabIndex:0,role:"region","aria-label":`Product card: ${s.name}`,sx:{display:"flex",flexDirection:"column",width:"100%",borderRadius:3,boxShadow:3,bgcolor:"#fff",overflow:"hidden",transition:"all 0.3s ease-in-out",position:"relative",minHeight:{xs:210,sm:260,md:280},"&:hover":{boxShadow:6},"&:focus-visible":{outline:"2px solid #1976d2",outlineOffset:2}},children:[e.jsx(y,{component:"img",image:s.mobileImage||a,alt:s.name||"Product Image",sx:{width:"100%",height:{xs:60,sm:90,md:110},aspectRatio:"3 / 2",objectFit:"contain",backgroundColor:"#f5f5f5",mt:{xs:1,sm:0}}}),e.jsxs(v,{sx:{px:{xs:.5,sm:2},py:{xs:1,sm:1.5},display:"flex",flexDirection:"column",justifyContent:"space-between",flexGrow:1,textAlign:"center"},children:[e.jsx(x,{variant:"subtitle2",fontWeight:600,fontSize:{xs:"11px",sm:"13px",md:"14px"},color:"text.primary",noWrap:!0,"aria-label":`Product Name: ${s.name}`,children:s.name}),e.jsxs(x,{variant:"body2",fontWeight:500,fontSize:{xs:"11px",sm:"13px",md:"14px"},color:"text.secondary",mt:.5,"aria-label":`Price: ₹${s.price}`,children:["₹",s.price]}),e.jsxs(o,{mt:1.2,display:"flex",justifyContent:"center",alignItems:"center",gap:.5,role:"group","aria-label":`Quantity controls for ${s.name}`,children:[e.jsx(c,{onClick:p,"aria-label":"Decrease quantity",disabled:t===0,size:"small",sx:{bgcolor:"grey.100",width:{xs:22,sm:28,md:32},height:{xs:22,sm:28,md:32},"&:disabled":{opacity:.4,cursor:"not-allowed"}},children:e.jsx(w,{fontSize:"inherit"})}),e.jsx(x,{component:"span",fontWeight:600,fontSize:{xs:"12px",sm:"14px",md:"15px"},"aria-live":"polite","aria-atomic":"true",width:"22px",textAlign:"center",children:t}),e.jsx(c,{onClick:l,"aria-label":"Increase quantity",size:"small",sx:{bgcolor:"grey.100",width:{xs:22,sm:28,md:32},height:{xs:22,sm:28,md:32}},children:e.jsx(C,{fontSize:"inherit"})})]})]}),e.jsx(o,{sx:{flexGrow:0,display:"flex",alignItems:"flex-end",justifyContent:"center",minHeight:40},children:e.jsx(b,{variant:"contained",color:"primary",onClick:u,disabled:t===0,sx:{width:{xs:"90%",sm:"90%"},alignSelf:"center",mb:{xs:1,sm:1.2},fontSize:{xs:"11px",sm:"13px",md:"14px"},py:{xs:.7,sm:1},borderRadius:2,boxShadow:2,textTransform:"capitalize"},"aria-label":`Add ${t} ${s.name} to cart`,children:"Add"})})]})})},I=s=>s.reduce((n,i)=>{const t=i.superCategory||"Other";return n[t]||(n[t]=[]),n[t].push(i),n},{}),W=({data:s=[],addToCart:n,selectedProduct:i})=>{let t=I(s);return i&&(t={[i.superCategory||"Other"]:s.filter(a=>a._id===i._id)}),e.jsx(o,{sx:{width:"100%",mt:2},children:Object.entries(t).map(([r,a])=>e.jsxs(o,{sx:{mb:4},children:[e.jsx(x,{variant:"h6",sx:{mb:2,fontWeight:700,color:"#1976d2"},children:r}),e.jsx(m,{container:!0,spacing:2,children:a.map(l=>e.jsx(m,{item:!0,xs:4,sm:3,md:2,display:"flex",justifyContent:"center",children:e.jsx(S,{data:l,addToCart:n})},l._id))})]},r))})};export{W as default};
